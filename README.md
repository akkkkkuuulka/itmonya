# Итмоня  
Я решила использовать агента, работающего по принципу ReAct. Промпт был адаптирован под русский язык и контекст задачи.  
В `test.ipynb` Находится пример запуска просто модели и работа на сгенеренных данных  

Были использованы инструменты:  
`tavily_search` - апи поиска в интернете  
`wikipedia` - поиск в википедии  
Также был написан свой тул `search_query_generator` - это вызов модели, который создает список оптимальных поисковых запросов.
Пример работы `search_query_generator`:  
```
Action: search_query_generator
Input: "В каком рейтинге ИТМО вошел в топ-400 в 2021 году?"
Output:
1. ["ITMO University" рейтинг топ 400] 2021 site:itmo.ru
2. "ИТМО университет" [глобальный рейтинг] 2021 топ 400
3. [мировой рейтинг университетов] ИТМО 2021 топ 400 filetype:pdf
4.  "рейтинг университетов 2021" ИТМО  [позиция]  400
5.  ИТМО  [топ 400 университетов мира] 2021  site:timeshighereducation.com\n']
```

**Схематичный флоу работы агента**

![Схема](https://i.ibb.co/tP1Ry4T6/image.png)

## Сборка
Для запуска выполните команду:

```bash
docker-compose up -d
```
Она соберёт Docker-образ, а затем запустит контейнер.

После успешного запуска контейнера приложение будет доступно на http://localhost:8080.

## Проверка работы
Отправьте POST-запрос на эндпоинт /api/request. Например, используйте curl:

```bash
curl --location --request POST 'http://localhost:8080/api/request' \
--header 'Content-Type: application/json' \
--data-raw '{
  "query": "В каком городе находится главный кампус Университета ИТМО?\n1. Москва\n2. Санкт-Петербург\n3. Екатеринбург\n4. Нижний Новгород",
  "id": 1
}'
```
В ответ вы получите JSON вида:

```json
{
  "id": 1,
  "answer": 1,
  "reasoning": "Из информации на сайте",
  "sources": [
    "https://itmo.ru/ru/",
    "https://abit.itmo.ru/"
  ]
}
```

id будет соответствовать тому, что вы отправили в запросе,
answer (в базовой версии) всегда будет 5.
## Кастомизация
Чтобы изменить логику ответа, отредактируйте функцию handle_request в main.py.
Если нужно использовать дополнительные библиотеки, добавьте их в requirements.txt и пересоберите образ.


Чтобы остановить сервис, выполните:

```bash
docker-compose down
```
